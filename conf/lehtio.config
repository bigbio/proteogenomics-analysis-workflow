trace {
  file = './trace.txt'
}

docker {
  enabled = true
}

params {
  threadspercore = 3
}

executor {
name = 'slurm'
}

process {
  withName: quantifySpectra {
    maxForks = 10
  }
  withName: createSpectraLookup {
    time = { check_max( 0.05.h * mzmlfiles.size(), 'time' ) }
  }
  withName: quantLookup {
    time = { check_max( 0.1.h * isofns.size(), 'time' ) }
    memory = '32 GB'
  }
  withName: createPSMTable {
    time = { check_max( 0.002.h * mzmlfiles.size(), 'time' ) } // 500 files, 1h
  }
  withName: msgfPlus {
    cpus = 4
    memory = { check_max( 16.GB * task.attempt, 'memory') }
  }
}
